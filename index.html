<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>

  <div id="root" style="display: none;">

    <div>
      <div is="component-button" type="outlined"
        onclick="document.querySelector('#component-accordion').setAttribute('expand', 'on')">
        展开
      </div>
      <div is="component-button" type="outlined"
        onclick="document.querySelector('#component-accordion').setAttribute('expand', 'off')">
        关闭
      </div>
      <div is="component-button" type="outlined"
        onclick="document.querySelector('#component-accordion').setAttribute('expand', 'auto')">
        自动
      </div>

      <div is="component-accordion" id="component-accordion" style="margin-top: 20px;" expand="auto">
        <div accordion="top">
          <div style="padding: 8px;">
            <div is="component-text" text='间の禁欲の果てに彼女の亲友と仆が浮気'></div>
          </div>
        </div>

        <div accordion="middle">
          <div style="padding: 8px;">
            <div is="component-text" text='间の禁欲の果てに彼女の亲友と仆が浮気'></div>
          </div>
        </div>

        <div accordion="bottom">
          <div style="padding: 8px;">
            <div is="component-text" text='间の禁欲の果てに彼女の亲友と仆が浮気'></div>
          </div>
        </div>
      </div>
    </div>

    <div style="margin-top: 40px;">
      <div is="component-button" type="outlined" onclick="addList()">
        添加
      </div>

      <div is="component-for" id="component-for" style="margin-top: 20px;" for="[1, 2, 3]">
        <div>123</div>
      </div>
    </div>


  </div>

</body>

<script src="./CustomElementRegistry_.js"></script>
<script src="./component-For.js"></script>
<script src="./component-Accordion.js"></script>
<script src="./component-Button.js"></script>
<script src="./component-Text.js"></script>

<script>
  data = {
    expand: 'off'
  }
</script>

<script>
  const customElements_ = new CustomElementRegistry_(document.getElementById('root'), data)

  customElements_.observe()
  customElements_.proxy()

  customElements_.define('component-for', ComponentFor)

  customElements_.define('component-accordion', ComponentAccordion)
  customElements_.define('component-button', ComponentButton)
  customElements_.define('component-text', ComponentText)
</script>

<script>
  const addList = () => {
    const for_ = JSON.parse(document.querySelector('#component-for').getAttribute('for'))

    console.log(for_)

    for_.push({ time: new Date().getTime })

    console.log(for_)

    document.querySelector('#component-for').setAttribute('for', JSON.stringify(for_))
  }
</script>

<script>
  document.getElementById('root').style.display = 'block'
</script>

</html>